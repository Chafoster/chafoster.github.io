<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Survey Lokasi Tomoro Coffee</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; padding:20px; }
    h1,h2,h3 { color:#4b2e2e; }
    .container { max-width:1000px; margin:auto; background:#fff; padding:24px; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}    
    .section { margin-bottom:28px; }
    label { font-weight:bold; display:block; margin-top:10px; }
    input, textarea, select { width:100%; padding:8px; margin-top:4px; border-radius:5px; border:1px solid #ccc; }
    textarea { resize:vertical; }
    .row { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:16px; }
    button { background:#6f4e37; color:#fff; border:none; padding:12px 20px; border-radius:6px; cursor:pointer; font-size:15px; }
    button:hover { background:#5a3f2c; }
    .result { padding:16px; border-radius:8px; margin-top:16px; font-weight:bold; }
    .green { background:#e6f4ea; color:#1e7e34; }
    .yellow { background:#fff3cd; color:#856404; }
    .red { background:#f8d7da; color:#721c24; }
    .error { background:#f8d7da; color:#721c24; padding:12px; border-radius:6px; margin-top:12px; }
    footer { text-align:center; margin-top:30px; color:#777; }

    /* Print style */
    @media print {
      body { background:#fff; padding:0; }
      button { display:none; }
      .container { box-shadow:none; max-width:100%; }
    }
  </style>
</head>
<body>
<div class="container" id="printArea">
  <h1>üìä Dashboard Survey Lokasi</h1>
  <p><strong>Kemitraan Tomoro Coffee ‚Äì Surabaya</strong></p>

  <div class="section">
    <h2>A. Identitas Lokasi</h2>
    <label>Nama Lokasi</label><input id="nama" placeholder="Contoh: Ruko...">
    <label>Alamat</label><textarea id="alamat" placeholder="Alamat lengkap lokasi"></textarea>
  </div>

  <div class="section">
    <h2>B. Biaya & Traffic</h2>
    <div class="row">
      <div><label>Sewa / Bulan (Rp)</label><input id="sewa" type="number" placeholder="0"></div>
      <div><label>Perkiraan Orang Lewat / Jam</label><input id="traffic" type="number" placeholder="0"></div>
      <div><label>Harga Rata-rata Kopi (Rp)</label><input id="harga" type="number" placeholder="0"></div>
    </div>
  </div>

  <div class="section">
    <h2>C. Skor Lokasi (1‚Äì5)</h2>
    <p>Isi semua skor (1 = buruk, 5 = sangat bagus)</p>
    <div class="row">
      <div><label>Lokasi & Visibilitas</label><input id="s1" type="number" min="1" max="5"></div>
      <div><label>Harga Sewa</label><input id="s2" type="number" min="1" max="5"></div>
      <div><label>Kompetitor</label><input id="s3" type="number" min="1" max="5"></div>
      <div><label>Delivery Potential</label><input id="s4" type="number" min="1" max="5"></div>
      <div><label>Akses & Parkir</label><input id="s5" type="number" min="1" max="5"></div>
    </div>
  </div>

  <div class="section">
    <h2>D. Hasil Analisa</h2>
    <button onclick="hitung()">üîç Hitung & Analisa</button>
    <button style="margin-left:10px;background:#2b6cb0" onclick="exportPDF()">üìÑ Export PDF</button>
    <div id="output"></div>
  </div>

  <footer>Chafoster ¬© 2026</footer>
</div>

<script>
function getNumber(id){
  const el = document.getElementById(id);
  if(!el || el.value === '') return null;
  return Number(el.value);
}

function hitung(){
  const traffic = getNumber('traffic');
  const harga = getNumber('harga');

  const scoreIds = ['s1','s2','s3','s4','s5'];
  const skor = scoreIds.map(id => getNumber(id));

  if(traffic === null || harga === null || skor.includes(null)){
    document.getElementById('output').innerHTML = `<div class="error">‚ö†Ô∏è Mohon isi semua data traffic, harga, dan skor lokasi (1‚Äì5).</div>`;
    return;
  }

  const totalSkor = skor.reduce((a,b)=>a+b,0);
  const estimasiCust = Math.round(traffic * 0.05);
  const omzet = estimasiCust * harga * 30;

  let rekom = "";
  let cls = "";
  if(totalSkor >= 22){ rekom = "SANGAT LAYAK ‚Äì Lokasi prioritas"; cls="green"; }
  else if(totalSkor >= 18){ rekom = "LAYAK ‚Äì Perlu negosiasi sewa"; cls="yellow"; }
  else { rekom = "RISIKO TINGGI ‚Äì Sebaiknya dihindari"; cls="red"; }

  document.getElementById('output').innerHTML = `
    <div class="result ${cls}">
      Total Skor Lokasi: <b>${totalSkor}/25</b><br><br>
      Estimasi Pelanggan/Hari: <b>${estimasiCust}</b><br>
      Estimasi Omzet/Bulan: <b>Rp ${omzet.toLocaleString('id-ID')}</b><br><br>
      Rekomendasi: <b>${rekom}</b>
    </div>`;
}

function exportPDF(){
  const result = document.getElementById('output');
  if(!result || result.innerHTML.trim()===''){
    alert('Silakan hitung analisa terlebih dahulu sebelum export PDF');
    return;
  }

  // Gunakan print halaman ini langsung (lebih aman dari sandbox / popup blocker)
  window.print();
}
</script>
</body>
</html>
